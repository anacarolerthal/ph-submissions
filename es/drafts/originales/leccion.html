<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>construir-repositorio-de-fuentes</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<p>title: Construir un repositorio de fuentes históricas con Omeka Classic collection: lessons layout: lesson slug: date: authors: - Jairo Antonio Melo Flórez reviewers: - editors: - José Antonio Motilla review-ticket: difficulty: activity: topics: [website] abstract: —</p>
<h1 id="contenido">Contenido</h1>
<p>{% include toc.html %}</p>
<ul>
<li>Uso “avanzado” de etiquetas y colecciones.</li>
<li>Gestión de metadatos: Crear y usar “tipos de elementos” para tipos documentales.</li>
<li>Inclusión de fuentes primarias, secundarias, biográficas y contextuales.</li>
<li>Inclusión de fuentes digitalizadas: imágenes y PDF.</li>
<li>Relación de elementos: construir una red de elementos interconectados. (Item Relations plugin)</li>
<li>Transcripción colaborativa de fuentes: Scripto.</li>
<li>Modificación de la plantilla básica para ordenar los elementos por fecha.</li>
</ul>
<h1 id="antes-de-empezar">Antes de empezar</h1>
<p>Actualmente el <a href="https://omeka.org" target="_blank">proyecto Omeka</a> se encuentra dividido en tres productos: Omeka Classic, una plataforma de publicación Web para construir y compartir colecciones digitales; Omeka.net, un servicio de alojamiento web específicamente diseñado para Omeka; y Omeka Semantic o S, lanzada en 2017, enfocada en la conexión de las colecciones con la Web semántica. Esta lección se basa en Omeka Classic<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> por estar enfocada en proyectos particulares, de individuos o grupos medianos. Para construir grandes colecciones institucionales de documentos, bibliotecas o archivos, recomendamos usar Omeka S.</p>
<div class="alert alert-warning">
<p>Esta lección plantea modificaciones menores a la base de datos y archivos de la plataforma. Antes de iniciar realice una copia de seguridad de toda la instalación o realice las prácticas con una instalación nueva o que no comprometa información actualmente en uso.</p>
</div>
<h1 id="introducción">Introducción</h1>
<p>La abundancia de información documental que tenemos a disposición es cada vez mayor. Las fuentes primarias que se encuentran publicadas por archivos y bibliotecas han facilitado significativamente nuestro trabajo de recolección de información histórica. Sin embargo, esto ha conllevado un problema de abundancia de digitalizaciones y transcripciones de documentos que muchas veces quedan almacenadas anárquicamente en nuestros ordenadores. En esta lección aprovecharemos las capacidades de Omeka para desarrollar repositorios, individuales o colaborativos, para almacenar, analizar y exhibir fuentes primarias; con el propósito de presentar una opción para la sistematización de documentación primaria que posteriormente podrá ser utilizada en tareas de investigación o exhibiciones Web.</p>
<p>Para seguir esta lección requieres una instalación de Omeka. Puedes seguir la lección <a href="http://programminghistorian.org/lessons/installing-omeka"><em>Installing Omeka</em></a> disponible en el sitio en inglés (la versión en español se encuentra en proceso de traducción). En caso de que necesites conocer el funcionamiento básico de la plataforma es importante que entiendas como <a href="https://programminghistorian.org/es/lecciones/poniendo-omeka-a-funcionar">crear sitios, elementos, colecciones</a> y <a href="https://programminghistorian.org/es/lecciones/crear-exposicion-con-omeka">exhibiciones</a>.</p>
<p>Asimismo es importante que en caso de querer ampliar la información sobre el funcionamiento de Omeka recurras al <a href="https://omeka.org/classic/docs/" target="_blank">manual de usuario</a> de la versión clásica. También es posible que consultes o participes en el <a href="https://forum.omeka.org/c/omeka-classic" target="_blank">foro</a> para obtener información adicional o respuesta a un problema específico.</p>
<h1 id="instalación-local-de-omeka">Instalación local de Omeka</h1>
<p>Instar un servidor Web en tu ordenador brinda la posibilidad de ejecutar aplicaciones como Omeka de manera privada y gratuita; lo que representa una ventaja significativa para experimentar con proyectos que aún se encuentren en desarrollo o para utilizar Omeka con información privada que no se desea subir a un servidor Web accesible desde la Internet.</p>
<p>La arquitectura de Omeka está basada en PHP-MySQL, esto significa que la información que se agrega, modifica y lee desde el entorno de la plataforma escrito en <a href="https://es.wikipedia.org/wiki/PHP" target="_blank">PHP</a>; queda almacenada en una base de datos <a href="https://es.wikipedia.org/wiki/MySQL" target="_blank">MySQL</a>; y se procesa mediante un servidor <a href="https://en.wikipedia.org/wiki/Apache_HTTP_Server" target="_blank">Apache</a>. No es necesario entender exactamente el funcionamiento de la tecnología de servidor (se requeriría de una especialización en informática para ello), pero es importante familiarizarse con los conceptos de servidor Web, plataforma y base de datos para los ejercicios posteriores.</p>
<p>El sentido básico de este esquema puede resumirse con la siguiente imagen:</p>
<p>{% include figure.html filename=“img_1.1.jpg” caption=“Síntesis de la tecnología de servidor” %}</p>
<h2 id="instalar-la-máquina-virtual">Instalar la máquina virtual</h2>
<p>Los fundamentos de la instalación en un servidor Web se cubrieron en la lección <a href="http://programminghistorian.org/lessons/installing-omeka"><em>Installing Omeka</em></a>,<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a> para esta lección ampliaremos en aquellos pasos necesarios para una instalación local. Para instalar en un ordenador personal debe crearse una <a href="https://es.wikipedia.org/wiki/M%C3%A1quina_virtual" target="_blank">máquina virtual</a>, es decir, un programa que permita ejecutar aplicaciones web desde el disco duro sin necesidad de estar conectado a Internet. Para los fines de esta lección usaremos el entorno <a href="https://www.apachefriends.org/es/index.html" target="_blank">XAMPP</a>, disponible para Windows, Linux y OS X. Después de descargar el paquete correspondiente a su sistema operativo instale el entorno siguiendo las instrucciones del instalador.<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a> El instalador le solicitará que escoja un directorio para albergar los archivos de la máquina virtual, en nuestro caso realizamos la instalación en Windows 10 y escogeremos la opción predeterminada <code>C:\xampp</code>; en el caso de Linux-Ubuntu será <code>/opt/lampp</code> y en Mac OS X será <code>/aplications/XAMPP</code>.</p>
<p>La primera acción que debemos realizar será activar los módulos “Apache” y “MySQL” para poner a funcionar nuestro servidor. Para eso sólo debes hacer click en los botones “Start” de la columna “Actions”, tras lo cual los módulos se pondrán de color verde.</p>
<p>{% include figure.html filename=“img_1.1-modact.jpg” caption=“Módulos XAMPP activados” %}</p>
<p>Para probar que todo funciona correctamente, ingresa desde tu navegador a la dirección <a href="http://localhost/" class="uri">http://localhost/</a> o <a href="http://127.0.0.1" class="uri">http://127.0.0.1</a>. Si la instalación es correcta te mostrará la pantalla de inicio:</p>
<p>{% include figure.html filename=“img_1.1-xampp-dashboard.jpg” caption=“Pantalla de inicio (dashboard) de XAMPP” %}</p>
<p>Deberás tener en el menú de inicio un menú de XAMPP con tres opciones desplegables. Las más útiles para nuestro trabajo serán “XAMPP Control Panel”, que abre el panel de control para activar o desactivar los módulos; y “XAMPP htdocs folder”, un enlace al directorio donde se guardarán los archivos de Omeka para realizar la instalación, por lo general es <code>C:\xampp\htdocs</code>.</p>
<p>Errores comunes en Windows que pueden surgir de este proceso pueden derivarse de haber instalado la máquina virtual sin desactivar el antivirus, conflictos con otras máquinas virtuales previamente instaladas, o haber escogido un directorio, para el caso de Windows 10, en la carpeta <code>C:\Program Files (x86)</code>. En todos estos casos la opción más sencilla consiste en reinstalar la máquina y evitar estas advertencias.</p>
<h2 id="instalar-y-activar-imagemagick">Instalar y activar Imagemagick</h2>
<p>Con el fin de poder visualizar los archivos de imagen es necesario activar ImageMagick, el cual puede ser descargado para plataformas Windows, Mac y Linux en el siguiente <a href="http://www.imagemagick.org/script/download.php" target="_blank">enlace</a>. Dependiendo de tus conocimientos en el uso de la línea de comandos podrás escoger entre la instalación desde <a href="http://www.imagemagick.org/script/install-source.php" target="_blank">la fuente</a> o con un instalador.</p>
<div class="alert alert-warning">
<p>La instalación de Imagemagick no es sencilla y puede conllevar muchos inconvenientes. Para este ejemplo nos remitiremos al sistema operativo Windows y realizaremos la instalación desde el paquete binario. Para Linux se recomienda instalar desde la fuente [<a href="http://www.imagemagick.org/script/install-source.php#unix" target="_blank">ver instrucciones</a>] y para Mac OS X la opción más recomendable es a través de <a href="http://www.imagemagick.org/script/download.php#macosx" target="_blank">MacPorts</a>.</p>
</div>
<h3 id="instalar-imagemagick">Instalar ImageMagick</h3>
<p>Al ejecutar el instalador siga las instrucciones hasta que aparezca la siguiente pantalla. Asegúrese de que la opción “<em>Add aplication directory to your system path</em>” se encuentre seleccionada y, para mayor seguridad, seleccione la opción “<em>Install legacy utilities (e.g. convert)</em>”.</p>
<p>{% include figure.html filename=“img_1.1-imagick-config-instal.jpg” caption=“Configuración de la instalación de ImageMagick” %}</p>
<p>Para probar la instalación solamente inicie la terminal de comandos (símbolo de sistema en Windows) y ejecute la siguiente orden:</p>
<pre class="cmd"><code>magick wizard: wizard.jpg
magick wizard:jpg win:</code></pre>
<h3 id="añadir-imagick-a-php">Añadir Imagick a PHP</h3>
<p>Ahora es necesario añadir Imagick a PHP para que ImageMagick pueda funcionar con Omeka. Para ello, descargue el <code>dll</code> de la extensión imagick desde el sitio de <a href="https://pecl.php.net/package/imagick" target="_blank">PECL</a>. Primero, seleccione la versión que desee descargar. En caso de tener dudas de la versión instalada ejecute en la terminal de comandos la siguiente orden: <code>magick -version</code>.</p>
<p>{% include figure.html filename=“img_1.1-imagick-dll.jpg” caption=“extensión imagick -dll” %}</p>
<p>Al hacer clic en la versión se desplegará una nueva lista que le pedirá seleccione entre varias versiones de PHP. Para saber cuál versión tiene instalada con su XAMPP la opción más segurá será crear un archivo <code>phpinfo</code>. Para ello, abra su editor de texto o de código (Komodo, Sublime Text, Notepad++, etc.) y copie allí el siguiente programa:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode php"><code class="sourceCode php"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">&lt;?php</span> <span class="fu">phpinfo</span><span class="ot">();</span> <span class="kw">?&gt;</span></a></code></pre></div>
<p>Guarde el archivo en el directorio <code>htdocs</code> de XAMPP con el nombre <code>phpinfo.php</code> y abra la siguiente dirección: <a href="http://localhost/phpinfo.php" class="uri">http://localhost/phpinfo.php</a>. Deberá aparecer la información de PHP disponible, encabezada por la versión instalada:</p>
<p>{% include figure.html filename=“img_1.1-imagick-phpinfo.jpg” caption=“información de la versión PHP” %}</p>
<p>Para escoger el archivo <code>dll</code> a descargar revise que corresponda a la versión y busque en la información del <code>phpinfo</code> si la opción “Thread Safety” está activada (<em>enabled</em>) o desactivada (<em>disabled</em>). Para nuestro caso, la instalación adecuada será <em>Thread Safe (TS) x64</em>.</p>
<p>{% include figure.html filename=“img_1.1-imagick-dll-2.jpg” caption=“selección dll” %}</p>
<p>Descargue el archivo <code>*.zip</code> en cualquier parte de su ordenador. Descomprímalo, copie únicamente el archivo <code>php_imagick.dll</code> y péguelo en el directorio <code>\xampp\php\ext</code>.</p>
<p>{% include figure.html filename=“img_1.1-imagick-dll-xampp-dir.jpg” caption=“directorio imagick” %}</p>
<h3 id="habilitar-imagick-en-php">Habilitar Imagick en PHP</h3>
<p>El siguiente paso consistirá en habilitar la extensión Imagick en PHP. Explora en el directorio <code>\xampp\php\</code> el archivo <code>php.ini</code> y ábrelo desde un editor de texto o de código. Busca en el archivo <code>Dynamic Extensions</code> y añade la siguiente línea:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode php"><code class="sourceCode php"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="ot">;</span> habilitar extensión Imagick</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">extension=php_imagick.dll</a></code></pre></div>
<h3 id="paso-final-instalar-binarios-de-imagick">Paso final: instalar binarios de Imagick</h3>
<p>Para finalizar con la instalación de Imagick tendremos que descargar los archivos binarios del programa. Para ello, navegaremos nuevamente al sitio de <a href="https://windows.php.net/downloads/pecl/deps/" target="_blank">PECL</a> y escogeremos la versión de acuerdo con la información brindada en <code>phpinfo.php</code> según los datos de las filas <code>Compiler</code> y <code>Architecture</code>. Así, para nuestro caso, el compilador es <strong>MSVC14</strong> y la arquitectura es <strong>x64</strong>, por lo que escogeremos el archivo ImageMagick-6.9.3-7-<strong>vc14</strong>-<strong>x64</strong>.zip</p>
<p>{% include figure.html filename=“img_1.1-imagick-selec-bin.jpg.jpg” caption=“seleccionar paquete binario de Imagick” %}</p>
<p>Descargue el archivo <code>*.zip</code> (aprox. &gt;30MB) en cualquier parte de su ordenador. Descomprímalo, abra la carpeta <code>bin</code> y copie <strong>todos los archivos dll</strong> excepto <code>ImageMagickObject.dll</code>. Pegue los archivos copiados (aprox. 146) en la carpeta <code>\xampp\apache\bin</code>. Reinicie el servidor Apache desde el “panel de control” de XAMPP y abra nuevamente la página <a href="http://localhost/phpinfo.php" class="uri">http://localhost/phpinfo.php</a>; deberá aparecer un módulo con el nombre <strong>imagick</strong>.</p>
<p>{% include figure.html filename=“img_1.1-imagick-imagick.jpg” caption=“Módulo Imagick en phpinfo” %}</p>
<p>Para comprobar que ImageMagick funciona creamos un archivo <code>.php</code> con el siguiente programa:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode php"><code class="sourceCode php"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw">&lt;?php</span> </a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="co">//encuentra si la extensión está cargada</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="kw">if</span> <span class="ot">(</span>!<span class="fu">extension_loaded</span><span class="ot">(</span><span class="st">&#39;imagick&#39;</span><span class="ot">))</span>{</a>
<a class="sourceLine" id="cb4-4" data-line-number="4">    <span class="co">//si no lo está, muestra el siguiente mensaje</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5">    <span class="kw">echo</span> <span class="st">&#39;imagick no se ha instalado correctamente&#39;</span><span class="ot">;</span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6">}</a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="kw">?&gt;</span></a></code></pre></div>
<p>Guárdalo con el nombre <code>imagick.php</code> en en el directorio <code>htdocs</code> de XAMPP y abra la siguiente dirección <a href="http://localhost/imagick.php" class="uri">http://localhost/imagick.php</a>. Si no aparece el mensaje <code>'imagick no se ha instalado correctamente'</code> significa que la instalación ha sido exitosa.</p>
<h2 id="instalación-local-de-omeka-1">Instalación local de Omeka</h2>
<p>Ahora pasaremos a realizar la instalación de Omeka en la máquina virtual que ya hemos configurado.</p>
<ol type="1">
<li><p>En primer lugar, descargue desde el sitio oficial de Omeka la versión más reciente de la plataforma. <a href="https://omeka.org/classic/download/" target="_blank">[Link de descarga]</a>. Descomprima el archivo <code>*.zip</code> y copie <strong>todos los archivos</strong> en el directorio <code>htdocs</code> de XAMPP. Cambie el nombre de la carpeta por la palabra o frase que servirá de “dirección” para el proyecto, por ejemplo, “repositorio” o “archivo-personal”. Al momento de realizar la instalación requeriremos ir a la dirección Web que se creará con esa información (por ejemplo <u>http://localhost/archivo-personal</u>) Asegúrese de no dejar espacios en blanco en el nombre para que el navegador pueda seguir la ruta del directorio.</p></li>
<li><p>El segundo paso consiste en crear una base de datos MySQL en el hosting. XAMPP cuenta con phpMyAdmin para facilitar la creación de bases de datos y edición de las tablas, por lo que haremos clic en la pestaña “phpMyAdmin” del escritorio de XAMPP y ésta nos redireccionará a la plataforma para gestionar la base de datos.</p></li>
</ol>
<p>En phpMyAdmin seleccionaremos la pestaña “Bases de datos” donde veremos un pequeño formulario para crear la base de datos, sólo tenemos que poner el nombre e indicar el cotejamiento. Seleccionaremos el cotejamiento <code>utf8_spanish_ci</code> ya que representará una mayor precisión al momento de ordenar los elementos (<em>items</em>) en Omeka.<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a></p>
<p>{% include figure.html filename=“img_1.2-crear-baseddatos.jpg” caption=“Crear base de datos en phpMyAdmin” %}</p>
<p>Después de crear la base de datos la plataforma lo llevará al escritorio donde podrá gestionar las tablas, ejecutar código SQL, importar y exportar tablas, gestionar los permisos de los usuarios, entre otras acciones. Por el momento la base de datos estará vacía puesto que no hemos creado ninguna tabla. Asegúrese de que haya un usuario vinculado a la base de datos (pestaña “Privilegios”) y que tenga todos los privilegios. En caso contrario puede seleccionar “editar privilegios” y hacer clic en la casilla “Seleccionar todo”. También puede crear y dar permisos a otros usuarios desde el menú “Agregar cuenta de usuario”.</p>
<p>Antes de salir anote los siguientes datos:</p>
<ul>
<li>Nombre del servidor</li>
<li>Nombre de la base de datos</li>
<li>Nombre de usuario</li>
<li>Contraseña del usuario</li>
</ul>
<h1 id="notas">Notas</h1>
<section class="footnotes">
<hr />
<ol>
<li id="fn1"><p>Esta lección se probó en la versión 2.6.1. (02/05/2018). En caso de tener una instalación anterior a Omeka 2.x se recomienda actualizar según las instrucciones del <a href="https://omeka.org/classic/docs/Installation/Upgrading/">manual de usuario</a>.<a href="#fnref1" class="footnote-back">↩</a></p></li>
<li id="fn2"><p>También puede seguir las instrucciones del manual de usuario: <a href="https://omeka.org/classic/docs/Installation/Installation/#7-easy-steps-for-installing-with-lamp-server-setup">7 pasos para instalar Omeka en un servidor LAMP</a> (en inglés).<a href="#fnref2" class="footnote-back">↩</a></p></li>
<li id="fn3"><p>Un video que explica la instalación del software puede consultarse en <a href="https://www.youtube.com/watch?v=h6DEDm7C37A" class="uri">https://www.youtube.com/watch?v=h6DEDm7C37A</a>.<a href="#fnref3" class="footnote-back">↩</a></p></li>
<li id="fn4"><p>Para comprobar como se modifica la ordenación de una lista de elementos de acuerdo con el cotejamiento (<em>collate</em>) véase <a href="http://rextester.com/FKMIHM35943" class="uri">http://rextester.com/FKMIHM35943</a>.<a href="#fnref4" class="footnote-back">↩</a></p></li>
</ol>
</section>
</body>
</html>
